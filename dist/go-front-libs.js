!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.goFrontLibs=e():t.goFrontLibs=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){!function(e,n){"use strict";t.exports=function(){var t=624,e=397,n=function(e){void 0===e&&(e=(new Date).getTime()),this.mt=new Array(t),this.mti=625,this.seed(e)};n.prototype.seed=function(e){var n;for(this.mt[0]=e>>>0,this.mti=1;this.mti<t;this.mti++)n=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&n)>>>16)<<16)+1812433253*(65535&n)+this.mti,this.mt[this.mti]>>>=0},n.prototype.seedArray=function(e){var n,r=1,o=0,i=t>e.length?t:e.length;for(this.seed(19650218);i>0;i--)n=this.mt[r-1]^this.mt[r-1]>>>30,this.mt[r]=(this.mt[r]^(1664525*((4294901760&n)>>>16)<<16)+1664525*(65535&n))+e[o]+o,this.mt[r]>>>=0,o++,++r>=t&&(this.mt[0]=this.mt[623],r=1),o>=e.length&&(o=0);for(i=623;i;i--)n=this.mt[r-1]^this.mt[r-1]>>>30,this.mt[r]=(this.mt[r]^(1566083941*((4294901760&n)>>>16)<<16)+1566083941*(65535&n))-r,this.mt[r]>>>=0,++r>=t&&(this.mt[0]=this.mt[623],r=1);this.mt[0]=2147483648},n.prototype.int=function(){var n,r,o=new Array(0,2567483615);if(this.mti>=t){for(625===this.mti&&this.seed(5489),r=0;r<227;r++)n=2147483648&this.mt[r]|2147483647&this.mt[r+1],this.mt[r]=this.mt[r+e]^n>>>1^o[1&n];for(;r<623;r++)n=2147483648&this.mt[r]|2147483647&this.mt[r+1],this.mt[r]=this.mt[r+(e-t)]^n>>>1^o[1&n];n=2147483648&this.mt[623]|2147483647&this.mt[0],this.mt[623]=this.mt[396]^n>>>1^o[1&n],this.mti=0}return n=this.mt[this.mti++],n^=n>>>11,n^=n<<7&2636928640,n^=n<<15&4022730752,(n^=n>>>18)>>>0},n.prototype.int31=function(){return this.int()>>>1},n.prototype.real=function(){return this.int()*(1/4294967295)},n.prototype.realx=function(){return(this.int()+.5)*(1/4294967296)},n.prototype.rnd=function(){return this.int()*(1/4294967296)},n.prototype.random=n.prototype.rnd,n.prototype.rndHiRes=function(){var t=this.int()>>>5,e=this.int()>>>6;return(67108864*t+e)*(1/9007199254740992)};var r=new n;return n.random=function(){return r.rnd()},n}()}()},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"newGuid",function(){return p}),n.d(r,"isGuid",function(){return d}),n.d(r,"EMPTY_GUID",function(){return y});var o={};n.r(o),n.d(o,"buildPrimaryKey",function(){return v}),n.d(o,"createEmptyDataset",function(){return m}),n.d(o,"buildDataset",function(){return b}),n.d(o,"addEntitiesToDataset",function(){return g}),n.d(o,"cleanResultFromRefMentions",function(){return O});var i={};n.r(i),n.d(i,"predicateToString",function(){return P}),n.d(i,"isConditionGroup",function(){return E}),n.d(i,"isCondition",function(){return A}),n.d(i,"arePredicatesEqual",function(){return x});var u={};n.r(u),n.d(u,"MODES",function(){return be}),n.d(u,"FORM_ACTIONS",function(){return ge}),n.d(u,"FormComponentMixinFactory",function(){return Oe});var a={};n.r(a),n.d(a,"MultipleEntitiesComponentMixinFactory",function(){return we});var c={};n.r(c),n.d(c,"SingleEntityComponentMixinFactory",function(){return _e});var s=n(0),f=n.n(s);
/*!
   Adapted by T. Villaren from Math.uuid.js (v1.4)
   http://www.broofa.com
   mailto:robert@broofa.com

   Copyright (c) 2010 Robert Kieffer

   Initially dual licensed under the MIT and GPL licenses.
   Used under the MIT License
*/
const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");let h=new f.a;function p(){for(var t,e=l,n=new Array(36),r=0,o=0;o<36;o++)8==o||13==o||18==o||23==o?n[o]="-":14==o?n[o]="4":(r<=2&&(r=33554432+16777216*h.random()|0),t=15&r,r>>=4,n[o]=e[19==o?3&t|8:t]);return n.join("")}function d(t){return t===y||/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}const y="00000000-0000-0000-0000-000000000000";function v(t,...e){var n;if(!t||"object"!=typeof t)throw new Error("buildPrimaryKey takes an entity object as first parameter");if(0==e.length)throw new Error("buildPrimaryKey takes at least one key name as second parameter");return 1==e.length?n=t[e]:(n={},e.forEach(e=>{n[e]=t[e]})),n}function m(){return{InternalObjectId:0,ObjectsDataSet:{$type:"ObjectsDataSet"}}}function b(t,e,...n){let r={InternalObjectId:0,ObjectsDataSet:{$type:"ObjectsDataSet"}};if(e&&e.length>0){if(!n||0==n.length)throw new Error("You must specify the PK field(s) for the main entity");r.PrimaryKey=v(e[0],n),g(t,e,r)}return r}function g(t,e,n){if(!t)throw new Error('You must specify the resourceName to use for this dataset ("main entity")');if(!n)throw new Error("You must specify the dataset to add entities to");let r=n.InternalObjectId,o=r;return t+"ObjectsDataSet"in n.ObjectsDataSet||(n.ObjectsDataSet[t+"ObjectsDataSet"]={},n.ObjectsDataSet[t+"ObjectsDataSet"][t+"Objects"]={}),e.forEach((e,i)=>{n.ObjectsDataSet[t+"ObjectsDataSet"][t+"Objects"][i+1+r]=e,o=i+r+1}),n.InternalObjectId=o,n}function O(t,e){return t instanceof Array?function(t,e){let n=[];return t.forEach(t=>{var r=O(t,e);null!=r&&n.push(r)}),n}(t,e):t instanceof Object?function(t,e){if(1===Object.keys(t).length&&t.hasOwnProperty("$ref"))return null;return Object.keys(t).forEach(n=>{if(e.indexOf(n)>-1){let r=w(e,n);t[n]=O(t[n],r)}else if(void 0!==e.find(t=>t.indexOf(n)>-1)){let r=w(e,n);t[n]=O(t[n],r)}}),t}(t,e):t}function w(t,e){return t.map(t=>t===e?null:t.indexOf(e)>-1?t.replace(e+".",""):t).filter(t=>null!==t)}const _="OPERATOR_TYPE_BINARY",j=["&&","||"],k={"==":_,"!=":_,"<=":_,"<":_,">=":_,">":_,StartsWith:"OPERATOR_TYPE_STRING",EndsWith:"OPERATOR_TYPE_STRING",Contains:"OPERATOR_TYPE_STRING"};function P(t){if(E(t)){let e=t.conditions.length;if(0===e)return"";if(-1===j.indexOf(t.operator))throw new Error(`Operator ${t.operator} is not valid for group`);let n="(",r=t.operator;return t.conditions.sort(M).forEach((t,o)=>{let i=P(t);""!==i&&(n+=i,o<e-1&&(n+=` ${r} `))}),n+=")"}if(A(t)){if(!k.hasOwnProperty(t.operator))throw new Error(`Operator ${t.operator} is not valid`);let e="",n=t.left.needsQuote?`"${t.left.value}"`:t.left.value,r=t.right.needsQuote?`"${t.right.value}"`:t.right.value;return e=k[t.operator]===_?`${n} ${t.operator} ${r}`:`${n}.${t.operator}(${r})`,t.negate?`!(${e})`:e}throw new Error("Predicate is neither a Condition or ConditionGroup")}function E(t){return t.hasOwnProperty("conditions")&&t.conditions instanceof Array}function A(t){return t.hasOwnProperty("left")&&t.hasOwnProperty("right")}function x(t,e){return!!(A(t)&&A(e)||E(t)&&E(e))&&P(t)===P(e)}function M(t,e){return t.order>e.order?1:t.order<e.order?-1:0}const K={"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"<=":(t,e)=>t<=e,"<":(t,e)=>t<e,">":(t,e)=>t>e,">=":(t,e)=>t>=e,StartsWith:(t,e)=>t.indexOf&&0===t.indexOf(e),EndsWith:(t,e)=>t.indexOf&&t.indexOf(e)===t.length-e.length,Contains:(t,e)=>t.indexOf&&t.indexOf(e)>-1};function C(t,e=null){let n=this,r=t.operator;if(E(t)){if(0===t.conditions.length)return n;if(t.conditions.sort((t,e)=>t.order>e.order?1:t.order<e.order?-1:0),"||"===r)t.conditions.forEach(e=>{n.orWhere((n,r)=>{C.call(r,e,t.operator,!1)})});else{if("&&"!==r)throw new Error(`Operator ${r} is not valid for group`);n.where((e,n)=>{t.conditions.forEach(e=>{C.call(n,e,t.operator,!1)})})}return n}if(A(t))return function(t,e,n="&&"){if(!K.hasOwnProperty(e.operator))throw new Error(`Operator ${e.operator} is not valid`);"||"===n?t.orWhere(e.left.value,t=>K[e.operator](t,e.right.value)):t.where(e.left.value,t=>K[e.operator](t,e.right.value));return t}(this,t,e);throw new Error("Predicate is neither a Condition or ConditionGroup")}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t}),Array.prototype.includes||(Array.prototype.includes=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Object(this),o=parseInt(r.length,10)||0;if(0===o)return!1;var i,u,a=e[1]||0;for(a>=0?i=a:(i=o+a)<0&&(i=0);i<o;){if(t===(u=r[i])||t!=t&&u!=u)return!0;i++}return!1});var R=function(){function t(){}return t.register=function(t){this.database=t},t}();function $(t,e){if(t!==e){if(t>e)return 1;if(t<e)return-1}return 0}var S={isEmpty:function(t){return Array.isArray(t)?0===t.length:0===Object.keys(t).length},forOwn:function(t,e){Object.keys(t).forEach(function(n){return e(t[n],n,t)})},groupBy:function(t,e){return t.reduce(function(t,n){var r=e(n);return void 0===t[r]&&(t[r]=[]),t[r].push(n),t},{})},map:function(t,e){return Object.keys(t).map(function(n){return e(t[n],n,t)})},mapValues:function(t,e){var n=Object.assign({},t);return Object.keys(t).reduce(function(n,r){return n[r]=e(t[r],r,t),n},n)},orderBy:function(t,e,n){var r=-1;return function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(t.map(function(t){return{criteria:e.map(function(e){return t[e]}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=t.criteria,o=e.criteria,i=r.length,u=n.length,a=-1;++a<i;){var c=$(r[a],o[a]);if(c){if(a>=u)return c;var s=n[a];return c*("desc"===s?-1:1)}}return t.index-e.index}(t,e,n)})},pickBy:function(t,e){return Object.keys(t).reduce(function(n,r){var o=t[r];return e(o,r)&&(n[r]=o),n},{})}},I=function(){return function(t){this.model=t}}(),F=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),z=function(t){function e(e,n){var r=t.call(this,e)||this;return r.mutator=n,r}return F(e,t),e.prototype.mutate=function(t,e){var n=this.mutator||this.model.mutators()[e];return n?n(t):t},e}(I),T=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(t){function e(e,n,r){var o=t.call(this,e,r)||this;return o.value=n,o}return T(e,t),e.prototype.fill=function(t){return void 0!==t?t:this.value},e.prototype.make=function(t,e,n,r){return this.mutate(this.fill(t),n)},e}(z),U=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(t){function e(e){var n=t.call(this,e)||this;return n.value=1,n}return U(e,t),e.prototype.fill=function(t){return t},e.prototype.make=function(t,e,n,r){return"number"==typeof t?t:null},e}(z),B=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(t){function e(e,n,r){var o=t.call(this,e,r)||this;return o.value=n,o}return B(e,t),e.prototype.fill=function(t){return void 0===t?this.value:"string"==typeof t?t:t+""},e.prototype.make=function(t,e,n,r){return this.mutate(this.fill(t),n)},e}(z),L=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(t){function e(e,n,r){var o=t.call(this,e,r)||this;return o.value=n,o}return L(e,t),e.prototype.fill=function(t){return void 0===t?this.value:"number"==typeof t?t:"string"==typeof t?parseFloat(t):"boolean"==typeof t&&t?1:0},e.prototype.make=function(t,e,n,r){return this.mutate(this.fill(t),n)},e}(z),q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),G=function(t){function e(e,n,r){var o=t.call(this,e,r)||this;return o.value=n,o}return q(e,t),e.prototype.fill=function(t){if(void 0===t)return this.value;if("boolean"==typeof t)return t;if("string"==typeof t){if(0===t.length)return!1;var e=parseInt(t,0);return!!isNaN(e)||!!e}return"number"==typeof t&&!!t},e.prototype.make=function(t,e,n,r){return this.mutate(this.fill(t),n)},e}(z),V=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return V(e,t),e.prototype.fillOne=function(t){return void 0===t?null:"object"==typeof t?null:t},e.prototype.fillMany=function(t){return Array.isArray(t)?t:[]},e.prototype.getRelation=function(t,e){var n=t.newPlainQuery(e);return this.addEagerConstraint(t,n),n},e.prototype.getKeys=function(t,e){return t.map(function(t){return t[e]})},e.prototype.addEagerConstraint=function(t,e){for(var n in t.load)t.load[n].forEach(function(t){t(e)})},e.prototype.mapSingleRelations=function(t,e){return t.reduce(function(t,n){return t[n[e]]=n,t},{})},e.prototype.mapManyRelations=function(t,e){return t.reduce(function(t,n){var r=n[e];return t[r]||(t[r]=[]),t[r].push(n),t},{})},e.prototype.isOneRelation=function(t){return!Array.isArray(t)&&null!==t&&"object"==typeof t},e}(I),Y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),J=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.related=i.model.relation(n),i.foreignKey=r,i.localKey=o,i}return Y(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){var r=n[this.related.entity];r&&r[t]&&void 0===r[t][this.foreignKey]&&(e[this.localKey]||(e[this.localKey]=e.$id),r[t][this.foreignKey]=e[this.localKey])},e.prototype.fill=function(t){return this.fillOne(t)},e.prototype.make=function(t,e,n,r){return void 0===r&&(r=!1),this.isOneRelation(t)?this.related.make(t,r):null},e.prototype.load=function(t,e,n){var r=this,o=this.getRelation(t,this.related.entity);o.where(this.foreignKey,this.getKeys(e,this.localKey));var i=this.mapSingleRelations(o.get(),this.foreignKey);e.forEach(function(t){var e=i[t[r.localKey]];t[n]=e||null})},e}(Q),X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.parent=i.model.relation(n),i.foreignKey=r,i.ownerKey=o,i}return X(e,t),e.prototype.define=function(t){return t.one(this.parent)},e.prototype.attach=function(t,e,n){void 0===e[this.foreignKey]&&(e[this.foreignKey]=t)},e.prototype.fill=function(t){return this.fillOne(t)},e.prototype.make=function(t,e,n,r){return void 0===r&&(r=!1),this.isOneRelation(t)?this.parent.make(t,r):null},e.prototype.load=function(t,e,n){var r=this,o=this.getRelation(t,this.parent.entity);t.where(this.ownerKey,this.getKeys(e,this.foreignKey));var i=this.mapSingleRelations(o.get(),this.ownerKey);e.forEach(function(t){var e=i[t[r.foreignKey]];t[n]=e||null})},e}(Q),tt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.related=i.model.relation(n),i.foreignKey=r,i.localKey=o,i}return tt(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this;Array.isArray(t)&&t.forEach(function(t){var o=n[r.related.entity];o&&o[t]&&void 0===o[t][r.foreignKey]&&(o[t][r.foreignKey]=e.$id)})},e.prototype.fill=function(t){return this.fillMany(t)},e.prototype.make=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),null===t?[]:void 0===t?[]:Array.isArray(t)?0===t.length?[]:t.filter(function(t){return t&&"object"==typeof t}).map(function(t){return o.related.make(t,r)}):[]},e.prototype.load=function(t,e,n){var r=this,o=this.getRelation(t,this.related.entity);o.where(this.foreignKey,this.getKeys(e,this.localKey));var i=this.mapManyRelations(o.get(),this.foreignKey);e.forEach(function(t){var e=i[t[r.localKey]];t[n]=e||[]})},e}(Q),nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rt=function(t){function e(e,n,r,o){var i=t.call(this,e)||this;return i.parent=i.model.relation(n),i.foreignKey=r,i.ownerKey=o,i}return nt(e,t),e.prototype.define=function(t){return t.many(this.parent)},e.prototype.attach=function(t,e,n){0!==t.length&&void 0===e[this.foreignKey]&&(e[this.foreignKey]=t)},e.prototype.fill=function(t){return this.fillMany(t)},e.prototype.make=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),null===t?[]:void 0===t?[]:Array.isArray(t)?0===t.length?[]:t.filter(function(t){return t&&"object"==typeof t}).map(function(t){return o.parent.make(t,r)}):[]},e.prototype.load=function(t,e,n){var r=this,o=this.getRelation(t,this.parent.entity);this.addConstraintForHasManyBy(o,e);var i=this.mapSingleRelations(o.get(),this.ownerKey);e.forEach(function(t){var e=r.getRelatedRecords(i,t[r.foreignKey]);t[n]=e})},e.prototype.addConstraintForHasManyBy=function(t,e){var n=this,r=e.reduce(function(t,e){return t.concat(e[n.foreignKey])},[]);t.where(this.ownerKey,r)},e.prototype.getRelatedRecords=function(t,e){return e.reduce(function(e,n){var r=t[n];return r&&e.push(r),e},[])},e}(Q),ot=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(t){function e(e,n,r,o,i,u,a){var c=t.call(this,e)||this;return c.related=c.model.relation(n),c.through=c.model.relation(r),c.firstKey=o,c.secondKey=i,c.localKey=u,c.secondLocalKey=a,c}return ot(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.fill=function(t){return this.fillMany(t)},e.prototype.make=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),null===t?[]:void 0===t?[]:Array.isArray(t)?0===t.length?[]:t.filter(function(t){return t&&"object"==typeof t}).map(function(t){return o.related.make(t,r)}):[]},e.prototype.load=function(t,e,n){var r=this,o=this.getRelation(t,this.related.entity),i=t.newPlainQuery(this.through.entity);this.addEagerConstraintForThrough(i,e);var u=i.get();this.addEagerConstraintForRelated(o,u);var a=this.mapThroughRelations(u,o);e.forEach(function(t){var e=a[t[r.localKey]];t[n]=e})},e.prototype.addEagerConstraintForThrough=function(t,e){t.where(this.firstKey,this.getKeys(e,this.localKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.where(this.secondKey,this.getKeys(e,this.secondLocalKey))},e.prototype.mapThroughRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.secondKey);return t.reduce(function(t,e){var o=e[n.firstKey];t[o]||(t[o]=[]);var i=r[e[n.secondLocalKey]];return i&&(t[o]=t[o].concat(i)),t},{})},e}(Q),ut=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),at=function(){return(at=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ct=function(t){function e(e,n,r,o,i,u,a){var c=t.call(this,e)||this;return c.related=c.model.relation(n),c.pivot=c.model.relation(r),c.foreignPivotKey=o,c.relatedPivotKey=i,c.parentKey=u,c.relatedKey=a,c}return ut(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.fill=function(t){return this.fillMany(t)},e.prototype.make=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),null===t?[]:void 0===t?[]:Array.isArray(t)?0===t.length?[]:t.filter(function(t){return t&&"object"==typeof t}).map(function(t){return o.related.make(t,r)}):[]},e.prototype.load=function(t,e,n){var r=this,o=this.getRelation(t,this.related.entity),i=t.newPlainQuery(this.pivot.entity);this.addEagerConstraintForPivot(i,e);var u=i.get();this.addEagerConstraintForRelated(o,u);var a=this.mapPivotRelations(u,o);e.forEach(function(t){var e=a[t[r.parentKey]];t[n]=e})},e.prototype.addEagerConstraintForPivot=function(t,e){t.where(this.foreignPivotKey,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.where(this.relatedPivotKey,this.getKeys(e,this.relatedKey))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return t.reduce(function(t,e){var o=e[n.foreignPivotKey];t[o]||(t[o]=[]);var i=r[e[n.relatedPivotKey]];return i&&(t[o]=t[o].concat(i)),t},{})},e.prototype.createPivots=function(t,e,n){var r=this;return this.pivot.primaryKey instanceof Array==!1?e:(S.forOwn(e[t.entity],function(t){var o=t[n];void 0!==o&&0!==o.length&&r.createPivotRecord(e,t,o)}),e)},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach(function(n){var o,i,u=e[r.parentKey]+"_"+n;t[r.pivot.entity]=at({},t[r.pivot.entity],((o={})[u]=((i={$id:u})[r.foreignPivotKey]=e[r.parentKey],i[r.relatedPivotKey]=n,i),o))})},e}(Q),st=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ft=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.id=n,o.type=r,o}return st(e,t),e.prototype.define=function(t){var e=this;return t.union(function(t,n){return n[e.type]})},e.prototype.attach=function(t,e,n){},e.prototype.fill=function(t){return this.fillOne(t)},e.prototype.make=function(t,e,n,r){if(void 0===r&&(r=!1),!this.isOneRelation(t))return null;var o=e[this.type],i=this.model.relation(o);return i?i.make(t,r):null},e.prototype.load=function(t,e,n){var r=this,o=this.getTypes(e).reduce(function(e,n){var o=r.getRelation(t,n);return e[n]=r.mapSingleRelations(o.get(),"$id"),e},{});e.forEach(function(t){var e=t[r.id],i=t[r.type],u=o[i][e];t[n]=u||null})},e.prototype.getTypes=function(t){var e=this;return t.reduce(function(t,n){var r=n[e.type];return!t.includes(r)&&t.push(r),t},[])},e}(Q),lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ht=function(t){function e(e,n,r,o,i){var u=t.call(this,e)||this;return u.related=u.model.relation(n),u.id=r,u.type=o,u.localKey=i,u}return lt(e,t),e.prototype.define=function(t){return t.one(this.related)},e.prototype.attach=function(t,e,n){var r=n[this.related.entity]&&n[this.related.entity][t];r&&(r[this.id]=r[this.id]||e.$id,r[this.type]=r[this.type]||this.model.entity)},e.prototype.fill=function(t){return this.fillOne(t)},e.prototype.make=function(t,e,n,r){return void 0===r&&(r=!1),this.isOneRelation(t)?this.related.make(t,r):null},e.prototype.load=function(t,e,n){var r=this,o=this.getRelation(t,this.related.entity);this.addEagerConstraintForMorphOne(o,e,t.entity);var i=this.mapSingleRelations(o.get(),this.id);e.forEach(function(t){var e=i[t[r.localKey]];t[n]=e||null})},e.prototype.addEagerConstraintForMorphOne=function(t,e,n){t.where(this.type,n).where(this.id,this.getKeys(e,this.localKey))},e}(Q),pt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dt=function(t){function e(e,n,r,o,i){var u=t.call(this,e)||this;return u.related=u.model.relation(n),u.id=r,u.type=o,u.localKey=i,u}return pt(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){var r=this,o=n[this.related.entity];t.forEach(function(t){var n=o[t];n[r.id]=n[r.id]||e.$id,n[r.type]=n[r.type]||r.model.entity})},e.prototype.fill=function(t){return this.fillMany(t)},e.prototype.make=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),null===t?[]:void 0===t?[]:Array.isArray(t)?0===t.length?[]:t.filter(function(t){return t&&"object"==typeof t}).map(function(t){return o.related.make(t,r)}):[]},e.prototype.load=function(t,e,n){var r=this,o=this.getRelation(t,this.related.entity);this.addEagerConstraintForMorphMany(o,e,t.entity);var i=this.mapManyRelations(o.get(),this.id);e.forEach(function(t){var e=i[t[r.localKey]];t[n]=e})},e.prototype.addEagerConstraintForMorphMany=function(t,e,n){t.where(this.type,n).where(this.id,this.getKeys(e,this.localKey))},e}(Q),yt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vt=function(){return(vt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},mt=function(t){function e(e,n,r,o,i,u,a,c){var s=t.call(this,e)||this;return s.related=s.model.relation(n),s.pivot=s.model.relation(r),s.relatedId=o,s.id=i,s.type=u,s.parentKey=a,s.relatedKey=c,s}return yt(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.fill=function(t){return this.fillMany(t)},e.prototype.make=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),null===t?[]:void 0===t?[]:Array.isArray(t)?0===t.length?[]:t.filter(function(t){return t&&"object"==typeof t}).map(function(t){return o.related.make(t,r)}):[]},e.prototype.load=function(t,e,n){var r=this,o=this.getRelation(t,this.related.entity),i=t.newPlainQuery(this.pivot.entity);this.addEagerConstraintForPivot(i,e,t.entity);var u=i.get();this.addEagerConstraintForRelated(o,u);var a=this.mapPivotRelations(u,o);e.forEach(function(t){var e=a[t[r.parentKey]];t[n]=e})},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.where(this.type,n).where(this.id,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.where(this.relatedKey,this.getKeys(e,this.relatedId))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return t.reduce(function(t,e){var o=e[n.id];t[o]||(t[o]=[]);var i=r[e[n.relatedId]];return i&&(t[o]=t[o].concat(i)),t},{})},e.prototype.createPivots=function(t,e,n){var r=this;return S.forOwn(e[t.entity],function(o){var i=o[n];Array.isArray(i)&&0!==i.length&&r.createPivotRecord(t,e,o,i)}),e},e.prototype.createPivotRecord=function(t,e,n,r){var o=this;r.forEach(function(r){var i,u,a=n[o.parentKey],c=a+"_"+r+"_"+t.entity;e[o.pivot.entity]=vt({},e[o.pivot.entity],((i={})[c]=((u={$id:c})[o.relatedId]=r,u[o.id]=a,u[o.type]=t.entity,u),i))})},e}(Q),bt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(){return(gt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Ot=function(t){function e(e,n,r,o,i,u,a,c){var s=t.call(this,e)||this;return s.related=s.model.relation(n),s.pivot=s.model.relation(r),s.relatedId=o,s.id=i,s.type=u,s.parentKey=a,s.relatedKey=c,s}return bt(e,t),e.prototype.define=function(t){return t.many(this.related)},e.prototype.attach=function(t,e,n){},e.prototype.fill=function(t){return this.fillMany(t)},e.prototype.make=function(t,e,n,r){var o=this;return void 0===r&&(r=!1),null===t?[]:void 0===t?[]:Array.isArray(t)?0===t.length?[]:t.filter(function(t){return t&&"object"==typeof t}).map(function(t){return o.related.make(t,r)}):[]},e.prototype.load=function(t,e,n){var r=this,o=this.getRelation(t,this.related.entity),i=t.newPlainQuery(this.pivot.entity);this.addEagerConstraintForPivot(i,e,this.related.entity);var u=i.get();this.addEagerConstraintForRelated(o,u);var a=this.mapPivotRelations(u,o);e.forEach(function(t){var e=a[t[r.parentKey]];t[n]=e})},e.prototype.addEagerConstraintForPivot=function(t,e,n){t.where(this.type,n).where(this.relatedId,this.getKeys(e,this.parentKey))},e.prototype.addEagerConstraintForRelated=function(t,e){t.where(this.relatedKey,this.getKeys(e,this.id))},e.prototype.mapPivotRelations=function(t,e){var n=this,r=this.mapManyRelations(e.get(),this.relatedKey);return t.reduce(function(t,e){var o=e[n.relatedId];t[o]||(t[o]=[]);var i=r[e[n.id]];return i&&(t[o]=t[o].concat(i)),t},{})},e.prototype.createPivots=function(t,e,n){var r=this;return S.forOwn(e[t.entity],function(t){var o=t[n];0!==o.length&&r.createPivotRecord(e,t,o)}),e},e.prototype.createPivotRecord=function(t,e,n){var r=this;n.forEach(function(n){var o,i,u=e[r.parentKey],a=n+"_"+u+"_"+r.related.entity;t[r.pivot.entity]=gt({},t[r.pivot.entity],((o={})[a]=((i={$id:a})[r.relatedId]=u,i[r.id]=n,i[r.type]=r.related.entity,i),o))})},e}(Q),wt=function(){return(wt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},_t=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(u,a)}c((r=r.apply(t,e||[])).next())})},jt=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},kt=function(){function t(t){this.$fill(t)}return t.fields=function(){return{}},t.getFields=function(){return this.cachedFields?this.cachedFields:(this.cachedFields=wt({$id:this.attr(void 0)},this.fields()),this.cachedFields)},t.attr=function(t,e){return new D(this,t,e)},t.string=function(t,e){return new H(this,t,e)},t.number=function(t,e){return new W(this,t,e)},t.boolean=function(t,e){return new G(this,t,e)},t.increment=function(){return new N(this)},t.hasOne=function(t,e,n){return new J(this,t,e,this.localKey(n))},t.belongsTo=function(t,e,n){return new Z(this,t,e,this.relation(t).localKey(n))},t.hasMany=function(t,e,n){return new et(this,t,e,this.localKey(n))},t.hasManyBy=function(t,e,n){return new rt(this,t,e,this.relation(t).localKey(n))},t.hasManyThrough=function(t,e,n,r,o,i){return new it(this,t,e,n,r,this.localKey(o),this.relation(e).localKey(i))},t.belongsToMany=function(t,e,n,r,o,i){return new ct(this,t,e,n,r,this.localKey(o),this.relation(t).localKey(i))},t.morphTo=function(t,e){return new ft(this,t,e)},t.morphOne=function(t,e,n,r){return new ht(this,t,e,n,this.localKey(r))},t.morphMany=function(t,e,n,r){return new dt(this,t,e,n,this.localKey(r))},t.morphToMany=function(t,e,n,r,o,i,u){return new mt(this,t,e,n,r,o,this.localKey(i),this.relation(t).localKey(u))},t.morphedByMany=function(t,e,n,r,o,i,u){return new Ot(this,t,e,n,r,o,this.localKey(i),this.relation(t).localKey(u))},t.mutators=function(){return{}},t.database=function(){return R.database},t.store=function(){return this.database().store},t.namespace=function(t){return this.database().namespace+"/"+this.entity+"/"+t},t.dispatch=function(t,e){return this.store().dispatch(this.namespace(t),e)},t.getters=function(t){return this.store().getters[this.namespace(t)]},t.create=function(t){return _t(this,void 0,void 0,function(){return jt(this,function(e){return[2,this.dispatch("create",t)]})})},t.insert=function(t){return _t(this,void 0,void 0,function(){return jt(this,function(e){return[2,this.dispatch("insert",t)]})})},t.update=function(t){return _t(this,void 0,void 0,function(){return jt(this,function(e){return[2,this.dispatch("update",t)]})})},t.insertOrUpdate=function(t){return _t(this,void 0,void 0,function(){return jt(this,function(e){return[2,this.dispatch("insertOrUpdate",t)]})})},t.all=function(){return this.getters("all")()},t.find=function(t){return this.getters("find")(t)},t.query=function(){return this.getters("query")()},t.delete=function(t){return _t(this,void 0,void 0,function(){return jt(this,function(e){return[2,this.dispatch("delete",t)]})})},t.id=function(t){var e=this.primaryKey;return"string"==typeof e?t[e]:e.map(function(e){return t[e]}).join("_")},t.localKey=function(t){return t||("string"==typeof this.primaryKey?this.primaryKey:"id")},t.relation=function(t){return"string"!=typeof t?t:this.database().model(t)},t.getAttributeClass=function(t){switch(t){case"increment":return N;default:throw Error('The attribute name "'+t+"\" doesn't exists.")}},t.getFieldsByAttribute=function(t){var e=this.getAttributeClass(t),n=this.fields();return Object.keys(n).reduce(function(t,r){var o=n[r];return o instanceof e&&(t[r]=o),t},{})},t.getIncrementFields=function(){return this.getFieldsByAttribute("increment")},t.hasIncrementFields=function(){return Object.keys(this.getIncrementFields()).length>0},t.pivotFields=function(){var t=[];return S.forOwn(this.fields(),function(e,n){var r;(e instanceof ct||e instanceof mt||e instanceof Ot)&&t.push(((r={})[n]=e,r))}),t},t.hasPivotFields=function(){return this.pivotFields().length>0},t.make=function(t,e){return void 0===e&&(e=!1),e?this.fill({},t,!0):new this(t)},t.makePlain=function(t){return this.make(t,!0)},t.fix=function(t,e){void 0===e&&(e=["$id"]);var n=this.getFields();return Object.keys(t).reduce(function(r,o){var i=t[o],u=n[o];return e.includes(o)?(r[o]=i,r):u?(r[o]=u.fill(i),r):r},{})},t.fixMany=function(t,e){var n=this;return Object.keys(t).reduce(function(r,o){return r[o]=n.fix(t[o],e),r},{})},t.hydrate=function(t,e){void 0===e&&(e=["$id"]);var n=this.getFields(),r=Object.keys(n).reduce(function(e,r){var o=n[r],i=t[r];return e[r]=o.fill(i),e},{});return Object.keys(t).reduce(function(n,r){return e.includes(r)&&void 0!==t[r]&&(n[r]=t[r]),n},r)},t.hydrateMany=function(t,e){var n=this;return Object.keys(t).reduce(function(r,o){return r[o]=n.hydrate(t[o],e),r},{})},t.fill=function(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),void 0===n&&(n=!1);var r=this.getFields();return Object.keys(r).reduce(function(t,o){var i=r[o],u=e[o];return t[o]=i.make(u,e,o,n),t},t)},t.prototype.$self=function(){return this.constructor},t.prototype.$fields=function(){return this.$self().fields()},t.prototype.$store=function(){return this.$self().store()},t.prototype.$namespace=function(t){return this.$self().namespace(t)},t.prototype.$dispatch=function(t,e){return this.$self().dispatch(t,e)},t.prototype.$getters=function(t){return this.$self().getters(t)},t.prototype.$create=function(t){return _t(this,void 0,void 0,function(){return jt(this,function(e){return[2,this.$dispatch("create",t)]})})},t.prototype.$insert=function(t){return _t(this,void 0,void 0,function(){return jt(this,function(e){return[2,this.$dispatch("insert",t)]})})},t.prototype.$update=function(t){return _t(this,void 0,void 0,function(){return jt(this,function(e){return Array.isArray(t)?[2,this.$dispatch("update",t)]:void 0!==t.where?[2,this.$dispatch("update",t)]:void 0===this.$self().id(t)?[2,this.$dispatch("update",{where:this.$id,data:t})]:[2,this.$dispatch("update",t)]})})},t.prototype.$insertOrUpdate=function(t){return _t(this,void 0,void 0,function(){return jt(this,function(e){return[2,this.$dispatch("insertOrUpdate",t)]})})},t.prototype.$all=function(){return this.$getters("all")()},t.prototype.$find=function(t){return this.$getters("find")(t)},t.prototype.$query=function(){return this.$getters("query")()},t.prototype.$delete=function(t){return _t(this,void 0,void 0,function(){return jt(this,function(e){return t=void 0===t?this.$id:t,[2,this.$dispatch("delete",t)]})})},t.prototype.$fill=function(t){this.$self().fill(this,t)},t.prototype.$toJson=function(){return this.$self().makePlain(this)},t.primaryKey="id",t}();function Pt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Et(t,e){return t(e={exports:{}},e.exports),e.exports}var At=Et(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isImmutable=function(t){return!(!t||"function"!=typeof t.hasOwnProperty||!(t.hasOwnProperty("__ownerID")||t._map&&t._map.hasOwnProperty("__ownerID")))},e.denormalizeImmutable=function(t,e,n){return Object.keys(t).reduce(function(e,r){var o=""+r;return e.has(o)?e.set(o,n(e.get(o),t[o])):e},e)}});Pt(At);At.isImmutable,At.denormalizeImmutable;var xt=Et(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(At);var u=function(t){return function(e){return i.isImmutable(e)?e.get(t):e[t]}},a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||"string"!=typeof e)throw new Error("Expected a string key for Entity, but found "+e+".");var i=o.idAttribute,a=void 0===i?"id":i,c=o.mergeStrategy,s=void 0===c?function(t,e){return r({},t,e)}:c,f=o.processStrategy,l=void 0===f?function(t){return r({},t)}:f;this._key=e,this._getId="function"==typeof a?a:u(a),this._idAttribute=a,this._mergeStrategy=s,this._processStrategy=l,this.define(n)}return o(t,[{key:"define",value:function(t){this.schema=Object.keys(t).reduce(function(e,n){var o=t[n];return r({},e,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,o))},this.schema||{})}},{key:"getId",value:function(t,e,n){return this._getId(t,e,n)}},{key:"merge",value:function(t,e){return this._mergeStrategy(t,e)}},{key:"normalize",value:function(t,e,r,o,i){var u=this,a=this._processStrategy(t,e,r);return Object.keys(this.schema).forEach(function(t){if(a.hasOwnProperty(t)&&"object"===n(a[t])){var e=u.schema[t];a[t]=o(a[t],a,t,e,i)}}),i(this,a,t,e,r),this.getId(t,e,r)}},{key:"denormalize",value:function(t,e){var n=this;return i.isImmutable(t)?i.denormalizeImmutable(this.schema,t,e):(Object.keys(this.schema).forEach(function(r){if(t.hasOwnProperty(r)){var o=n.schema[r];t[r]=e(t[r],o)}}),t)}},{key:"key",get:function(){return this._key}},{key:"idAttribute",get:function(){return this._idAttribute}}]),t}();e.default=a});Pt(xt);var Mt=Et(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n&&(this._schemaAttribute="string"==typeof n?function(t){return t[n]}:n),this.define(e)}return n(t,[{key:"define",value:function(t){this.schema=t}},{key:"getSchemaAttribute",value:function(t,e,n){return!this.isSingleSchema&&this._schemaAttribute(t,e,n)}},{key:"inferSchema",value:function(t,e,n){if(this.isSingleSchema)return this.schema;var r=this.getSchemaAttribute(t,e,n);return this.schema[r]}},{key:"normalizeValue",value:function(t,e,n,r,o){var i=this.inferSchema(t,e,n);if(!i)return t;var u=r(t,e,n,i,o);return this.isSingleSchema||void 0===u||null===u?u:{id:u,schema:this.getSchemaAttribute(t,e,n)}}},{key:"denormalizeValue",value:function(t,e){var n=(0,At.isImmutable)(t)?t.get("schema"):t.schema;if(!this.isSingleSchema&&!n)return t;var r=(0,At.isImmutable)(t)?t.get("id"):t.id,o=this.isSingleSchema?this.schema:this.schema[n];return e(r||t,o)}},{key:"isSingleSchema",get:function(){return!this._schemaAttribute}}]),t}();e.default=r});Pt(Mt);var Kt=Et(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(Mt);var o=function(t){function e(t,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw new Error('Expected option "schemaAttribute" not found on UnionSchema.');return function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"normalize",value:function(t,e,n,r,o){return this.normalizeValue(t,e,n,r,o)}},{key:"denormalize",value:function(t,e){return this.denormalizeValue(t,e)}}]),e}();e.default=o});Pt(Kt);var Ct=Et(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(Mt);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),r(e,[{key:"normalize",value:function(t,e,r,o,u){var a=this;return Object.keys(t).reduce(function(e,r,c){var s=t[r];return void 0!==s&&null!==s?n({},e,i({},r,a.normalizeValue(s,t,r,o,u))):e},{})}},{key:"denormalize",value:function(t,e){var r=this;return Object.keys(t).reduce(function(o,u){var a=t[u];return n({},o,i({},u,r.denormalizeValue(a,e)))},{})}}]),e}();e.default=u});Pt(Ct);var Rt=Et(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.denormalize=e.normalize=void 0;var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(Mt);var o=function(t){if(Array.isArray(t)&&t.length>1)throw new Error("Expected schema definition to be a single schema, but found "+t.length+".");return t[0]},i=function(t){return Array.isArray(t)?t:Object.keys(t).map(function(e){return t[e]})},u=(e.normalize=function(t,e,n,r,u,a){return t=o(t),i(e).map(function(e,o){return u(e,n,r,t,a)})},e.denormalize=function(t,e,n){return t=o(t),e&&e.map?e.map(function(e){return n(e,t)}):e},function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"normalize",value:function(t,e,n,r,o){var u=this;return i(t).map(function(t,i){return u.normalizeValue(t,e,n,r,o)}).filter(function(t){return void 0!==t&&null!==t})}},{key:"denormalize",value:function(t,e){var n=this;return t&&t.map?t.map(function(t){return n.denormalizeValue(t,e)}):t}}]),e}());e.default=u});Pt(Rt);Rt.denormalize,Rt.normalize;var $t=Et(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.denormalize=e.normalize=void 0;var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(At);var i=function(t,e,n,o,i,u){var a=r({},e);return Object.keys(t).forEach(function(n){var r=t[n],o=i(e[n],e,n,r,u);void 0===o||null===o?delete a[n]:a[n]=o}),a};e.normalize=i;var u=function(t,e,n){if(o.isImmutable(e))return o.denormalizeImmutable(t,e,n);var i=r({},e);return Object.keys(t).forEach(function(e){i[e]&&(i[e]=n(i[e],t[e]))}),i};e.denormalize=u;var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.define(e)}return n(t,[{key:"define",value:function(t){this.schema=Object.keys(t).reduce(function(e,n){var o=t[n];return r({},e,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,o))},this.schema||{})}},{key:"normalize",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.apply(void 0,[this.schema].concat(e))}},{key:"denormalize",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.apply(void 0,[this.schema].concat(e))}}]),t}();e.default=a});Pt($t);$t.denormalize,$t.normalize;var St=Et(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.denormalize=e.normalize=e.schema=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=l(xt),i=l(Kt),u=l(Ct),a=f(Rt),c=f($t),s=f(At);function f(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}e.schema={Array:a.default,Entity:o.default,Object:c.default,Union:i.default,Values:u.default},e.normalize=function(t,e){if(!t||"object"!==(void 0===t?"undefined":r(t)))throw new Error('Unexpected input given to normalize. Expected type to be "object", found "'+(void 0===t?"undefined":r(t))+'".');var n={},o=function(t){return function(e,n,r,o,i){var u=e.key,a=e.getId(r,o,i);u in t||(t[u]={});var c=t[u][a];t[u][a]=c?e.merge(c,n):n}}(n);return{entities:n,result:function t(e,n,o,i,u){return"object"===(void 0===e?"undefined":r(e))&&e?"object"!==(void 0===i?"undefined":r(i))||i.normalize&&"function"==typeof i.normalize?i.normalize(e,n,o,t,u):(Array.isArray(i)?a.normalize:c.normalize)(i,e,n,o,t,u):e}(t,t,null,e,o)}};var h=function(t){var e={},i=p(t);return function t(u,f){return"object"!==(void 0===f?"undefined":r(f))||f.denormalize&&"function"==typeof f.denormalize?void 0===u||null===u?u:f instanceof o.default?function(t,e,o,i,u){var a=i(t,e);if("object"!==(void 0===a?"undefined":r(a))||null===a)return a;if(u[e.key]||(u[e.key]={}),!u[e.key][t]){var c=s.isImmutable(a)?a:n({},a);u[e.key][t]=c,u[e.key][t]=e.denormalize(c,o)}return u[e.key][t]}(u,f,t,i,e):f.denormalize(u,t):(Array.isArray(f)?a.denormalize:c.denormalize)(f,u,t)}},p=function(t){var e=s.isImmutable(t);return function(n,o){var i=o.key;return"object"===(void 0===n?"undefined":r(n))?n:e?t.getIn([i,n.toString()]):t[i][n]}};e.denormalize=function(t,e,n){if(void 0!==t)return h(n)(t,e)}});Pt(St);St.denormalize;var It=St.normalize,Ft=St.schema,zt=function(){function t(){}return t.process=function(t,e){if(S.isEmpty(e))return{};var n=t.database().schemas[t.model.entity],r=Array.isArray(e)?[n]:n;return It(e,r).entities},t}(),Tt=function(){function t(){}return t.process=function(t,e){return Object.keys(e).forEach(function(n){var r=t.getModel(n);r.hasPivotFields()&&S.forOwn(r.pivotFields(),function(t){S.forOwn(t,function(t,n){t.createPivots(r,e,n)})})}),e},t}(),Dt=function(){function t(){}return t.process=function(t,e){var n=this;return S.mapValues(e,function(e,r){var o=t.newPlainQuery(r);return o.model.hasIncrementFields()?(n.processRecordsByFields(e,o),e):e})},t.processRecordsByFields=function(t,e){var n=this,r=e.model.getIncrementFields();S.forOwn(r,function(r,o){n.processRecords(t,e,o)})},t.processRecords=function(t,e,n){var r=this.max(t,e,n);S.forOwn(t,function(t){"number"!=typeof t[n]&&(t[n]=++r)})},t.max=function(t,e,n){var r=e.max(n),o=Math.max.apply(Math,S.map(t,function(t){var e=t[n];return"number"==typeof e?e:0}));return Math.max(o,r)},t}(),Ut=function(){function t(){}return t.process=function(t,e){return S.forOwn(e,function(n,r){var o=t.getModel(r).fields();S.forOwn(n,function(t){S.forOwn(t,function(n,r){var i=o[r];i instanceof Q&&i.attach(n,t,e)})})}),e},t}(),Nt=function(){return(Nt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Bt=function(){function t(){}return t.process=function(t,e){var n=this;return S.mapValues(e,function(e,r){var o=t.newPlainQuery(r);return n.processRecords(e,o)})},t.processRecords=function(t,e){return Object.keys(t).reduce(function(n,r){var o=t[r],i=e.model.id(o),u=isNaN(i)?i:i.toString();return void 0===i||r===u?(n[r]=o,n):(n[u]=Nt({},o,{$id:i}),n)},{})},t}(),Ht=function(){function t(){}return t.normalize=function(t,e){var n=zt.process(t,e);return n=Tt.process(t,n),n=Dt.process(t,n),n=Ut.process(t,n),n=Bt.process(t,n)},t}(),Lt=function(){function t(){}return t.filter=function(t,e){var n=this;return 0===t.wheres.length?e:e.filter(function(e){return n.check(t,e)})},t.check=function(t,e){var n=S.groupBy(t.wheres,function(t){return t.boolean}),r=this.getComparator(t,e),o=[];return n.and&&o.push(n.and.every(r)),n.or&&o.push(n.or.some(r)),-1!==o.indexOf(!0)},t.getComparator=function(t,e){var n=this;return function(r){if("function"==typeof r.field){var o=new Jt(t.rootState,t.entity),i=n.executeWhereClosure(o,e,r.field);if("boolean"==typeof i)return i;var u=o.get();return!S.isEmpty(u.filter(function(t){return t.$id===e.$id}))}return"function"==typeof r.value?r.value(e[r.field]):Array.isArray(r.value)?-1!==r.value.indexOf(e[r.field]):e[r.field]===r.value}},t.executeWhereClosure=function(t,e,n){return 3!==n.length?n(e,t):n(e,t,new t.model(e))},t}(),Wt=function(){function t(){}return t.filter=function(t,e){if(0===t.orders.length)return e;var n=t.orders.map(function(t){return t.field}),r=t.orders.map(function(t){return t.direction});return S.orderBy(e,n,r)},t}(),qt=function(){function t(){}return t.filter=function(t,e){return e.slice(t._offset,t._offset+t._limit)},t}(),Gt=function(){function t(){}return t.where=function(t,e){return Lt.filter(t,e)},t.orderBy=function(t,e){return Wt.filter(t,e)},t.limit=function(t,e){return qt.filter(t,e)},t}(),Vt=function(){function t(){}return t.setEagerLoad=function(t,e,n){void 0===n&&(n=null),t.load[e]||(t.load[e]=[]),n&&t.load[e].push(n)},t.with=function(t,e,n){"*"!==e?this.parseWithRelations(t,e.split("."),n):this.withAll(t)},t.withAll=function(t,e){void 0===e&&(e=function(){return null});var n=t.model.getFields();for(var r in t.model.getFields())n[r]instanceof Q&&this.with(t,r,e)},t.withAllRecursive=function(t,e){this.withAll(t,function(t){e>0&&t.withAllRecursive(e-1)})},t.parseWithRelations=function(t,e,n){var r=this,o=e[0];o.split("|").forEach(function(e){r.setEagerLoad(t,e)}),1!==e.length?(e.shift(),this.addNestedWiths(t,e,n)):this.setEagerLoad(t,o,n)},t.addNestedWiths=function(t,e,n){var r=e.join(".");this.setEagerLoad(t,r,function(t){t.with(r,n)})},t.eagerLoadRelations=function(t,e){var n=t.model.getFields();for(var r in t.load){var o=n[r];o instanceof Q&&o.load(t,e,r)}},t}(),Qt=function(){function t(t){this.query=t}return t.on=function(t,e,n){void 0===n&&(n=!1);var r=this.lastHookId+1;return this.lastHookId=r,this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push({callback:e,once:n,uid:r}),r},t.off=function(t){var e=this,n=!1;return Object.keys(this.hooks).some(function(r){var o=e.hooks[r],i=o.findIndex(function(e){return e.uid===t});return-1!==i&&(o.splice(i,1),n=!0),n}),n},t.prototype.self=function(){return this.constructor},t.prototype.getActionHook=function(t){return this.query.actionContext&&this.query.module.actions&&this.query.module.actions[t]||null},t.prototype.getGlobalHook=function(t){return this.self().hooks[t]?this.self().hooks[t]:null},t.prototype.has=function(t){return!!this.getActionHook(t)||!!this.getGlobalHook(t)},t.prototype.execute=function(t,e){return this.has(t)?(e=this.executeActionHook(t,e),e=this.executeGlobalHook(t,e)):e},t.prototype.executeActionHook=function(t,e){if(!this.query.actionContext)return e;var n=this.getActionHook(t);if(!n)return e;var r=n(this.query.actionContext,e);return!1!==r&&(r||e)},t.prototype.executeGlobalHook=function(t,e){var n=this;if(!1===e)return!1;var r=this.getGlobalHook(t);if(!r)return e;var o=[];return r.forEach(function(t,r){var i=t.callback,u=t.once;e=i.call(n.query,e,n.query.entity),u&&o.push(r)}),o.reverse().forEach(function(t){r.splice(t,1)}),e},t.prototype.executeOnRecords=function(t,e){var n=this;return this.has(t)?Object.keys(e).reduce(function(r,o){var i=e[o],u=n.execute(t,i);return!1===u?r:(r[o]=u,r)},{}):e},t.prototype.executeOnCollection=function(t,e){var n=this;return this.has(t)?(e.map(function(e){n.execute(t,e)}),e):e},t.hooks={},t.lastHookId=0,t}(),Yt=function(){return(Yt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Jt=function(){function t(t,e,n){void 0===n&&(n=!0),this.wheres=[],this.orders=[],this._offset=0,this._limit=Math.pow(2,53)-1,this.load={},this.actionContext=null,this.rootState=t,this.state=t[e],this.entity=e,this.model=this.getModel(e),this.module=this.getModule(e),this.hook=new Qt(this),this.wrap=n}return t.query=function(t,e,n){return new this(t,e,n)},t.database=function(){return R.database},t.getModel=function(t){return this.database().model(t)},t.getModels=function(){return this.database().models()},t.getModule=function(t){return this.database().module(t)},t.getModules=function(){return this.database().modules()},t.create=function(t,e,n,r){return new this(t,e).create(n,r)},t.commitCreate=function(t,e,n){new this(t,e).commitCreate(n)},t.insert=function(t,e,n,r){return new this(t,e).insert(n,r)},t.commitInsert=function(t,e,n){new this(t,e).commitInsert(n)},t.update=function(t,e,n,r,o){return new this(t,e).update(n,r,o)},t.commitUpdate=function(t,e,n){new this(t,e).commitUpdate(n)},t.insertOrUpdate=function(t,e,n,r){return new this(t,e).insertOrUpdate(n,r)},t.all=function(t,e,n){return new this(t,e,n).get()},t.find=function(t,e,n,r){return new this(t,e,r).find(n)},t.count=function(t,e,n){return new this(t,e,n).count()},t.max=function(t,e,n,r){return new this(t,e,r).max(n)},t.min=function(t,e,n,r){return new this(t,e,r).min(n)},t.sum=function(t,e,n,r){return new this(t,e,r).sum(n)},t.delete=function(t,e,n){return new this(t,e).delete(n)},t.deleteAll=function(t,e){var n=this;if(e)return new this(t,e).deleteAll();var r=this.getModels();S.forOwn(r,function(e,r){t[r]&&new n(t,r).deleteAll()})},t.commitDelete=function(e,n,r){new t(e,n).commitDelete(r)},t.on=function(t,e,n){return Qt.on(t,e,n)},t.off=function(t){return Qt.off(t)},t.prototype.self=function(){return this.constructor},t.prototype.newQuery=function(e){return new t(this.rootState,e).setActionContext(this.actionContext)},t.prototype.newPlainQuery=function(e){return e=e||this.entity,new t(this.rootState,e).plain()},t.prototype.database=function(){return this.self().database()},t.prototype.getModel=function(t){var e=t||this.entity;return this.self().getModel(e)},t.prototype.getModels=function(){return this.self().getModels()},t.prototype.getModule=function(t){var e=t||this.entity;return this.self().getModule(e)},t.prototype.getModules=function(){return this.self().getModules()},t.prototype.commit=function(t,e,n){this.actionContext?(e=Yt({entity:this.entity},e),this.actionContext.commit(this.rootState.$name+"/"+t,e,{root:!0})):n()},t.prototype.plain=function(){return this.wrap=!1,this},t.prototype.setActionContext=function(t){return this.actionContext=t,this},t.prototype.create=function(t,e){return this.persist(t,"create",e)},t.prototype.createMany=function(t){t=this.model.hydrateMany(t),t=this.hook.executeOnRecords("beforeCreate",t),this.commitCreate(t);var e=this.collect(this.records(t));return this.hook.executeOnCollection("afterCreate",e)},t.prototype.commitCreate=function(t){var e=this;this.commit("commitCreate",{data:t},function(){e.state.data=t})},t.prototype.insert=function(t,e){return this.persist(t,"insert",e)},t.prototype.insertMany=function(t){t=this.model.hydrateMany(t),t=this.hook.executeOnRecords("beforeCreate",t),this.commitInsert(t);var e=this.collect(this.records(t));return this.hook.executeOnCollection("afterCreate",e)},t.prototype.commitInsert=function(t){var e=this;this.commit("commitInsert",{data:t},function(){e.state.data=Yt({},e.state.data,t)})},t.prototype.update=function(t,e,n){if(Array.isArray(t))return this.persist(t,"update",n);if("function"==typeof t){if(!e)throw new Error("You must specify `where` to update records by specifying `data` as a closure.");return"function"==typeof e?this.updateByCondition(t,e):this.updateById(t,e)}if("function"==typeof e)return this.updateByCondition(t,e);if(!e)return this.persist(t,"update",n);if(Array.isArray(this.model.primaryKey))throw new Error("You can not specify `where` value when you have a composite key defined in your model. Please include composite keys to the `data` fields.");return t[this.model.primaryKey]=e,this.persist(t,"update",n)},t.prototype.updateMany=function(t){var e=this,n={};t=this.model.fixMany(t,[]),S.forOwn(t,function(t,r){var o=e.state.data[r];if(o){var i=JSON.parse(JSON.stringify(o));e.merge(t,i),n[r]=i}}),n=this.hook.executeOnRecords("beforeUpdate",n),this.commitUpdate(n);var r=this.collect(this.records(n));return this.hook.executeOnCollection("afterUpdate",r),r},t.prototype.updateById=function(t,e){var n;e="number"==typeof e?e.toString():e;var r=this.state.data[e];if(!r)return null;var o=JSON.parse(JSON.stringify(r));"function"==typeof t?t(o):this.merge(this.model.fix(t),o);var i=this.hook.execute("beforeUpdate",o);if(!1===i)return null;this.commitUpdate(((n={})[e]=i,n));var u=this.item(i);return this.hook.execute("afterUpdate",u),u},t.prototype.updateByCondition=function(t,e){var n=this,r={};S.forOwn(this.state.data,function(o,i){if(e(o)){var u=JSON.parse(JSON.stringify(o));"function"==typeof t?t(u):n.merge(n.model.fix(t),u),r[i]=u}}),r=this.hook.executeOnRecords("beforeUpdate",r),this.commitUpdate(r);var o=this.collect(this.records(r));return this.hook.executeOnCollection("afterUpdate",o),o},t.prototype.commitUpdate=function(t){var e=this;this.commit("commitUpdate",{data:t},function(){e.state.data=Yt({},e.state.data,t)})},t.prototype.insertOrUpdate=function(t,e){return this.persist(t,"insertOrUpdate",e)},t.prototype.insertOrUpdateMany=function(t){var e=this,n={},r={};return S.forOwn(t,function(t,o){e.state.data[o]?r[o]=t:n[o]=t}),this.collect(this.insertMany(n).concat(this.updateMany(r)))},t.prototype.persist=function(t,e,n){var r=this;return void 0===n&&(n={}),t=this.normalize(t),S.isEmpty(t)?("create"===e&&this.commitCreate({}),{}):Object.keys(t).reduce(function(o,i){var u=r.newQuery(i)[r.getPersistMethod(i,e,n)+"Many"](t[i]);return u.length>0&&(o[i]=u),o},{})},t.prototype.getPersistMethod=function(t,e,n){return n.create&&n.create.includes(t)?"create":n.insert&&n.insert.includes(t)?"insert":n.update&&n.update.includes(t)?"update":n.insertOrUpdate&&n.insertOrUpdate.includes(t)?"insertOrUpdate":e},t.prototype.normalize=function(t){return Ht.normalize(this,t)},t.prototype.merge=function(t,e,n){var r=this,o=n||this.model.getFields();S.forOwn(t,function(t,n){var i=o[n];i instanceof I?e[n]=t:r.merge(t,e[n],i)})},t.prototype.all=function(){return this.get()},t.prototype.find=function(t){var e=this.state.data[t];return e?this.item(Yt({},e)):null},t.prototype.get=function(){var t=this.process();return this.collect(t)},t.prototype.first=function(){var t=this.process();return this.item(t[0])},t.prototype.last=function(){var t=this.process(),e=t.length-1;return this.item(t[e])},t.prototype.records=function(t){var e=t||this.state.data;return Object.keys(e).map(function(t){return Yt({},e[t])})},t.prototype.where=function(t,e){return this.wheres.push({field:t,value:e,boolean:"and"}),this},t.prototype.orWhere=function(t,e){return this.wheres.push({field:t,value:e,boolean:"or"}),this},t.prototype.orderBy=function(t,e){return void 0===e&&(e="asc"),this.orders.push({field:t,direction:e}),this},t.prototype.offset=function(t){return this._offset=t,this},t.prototype.limit=function(t){return this._limit=t,this},t.prototype.with=function(t,e){return void 0===e&&(e=null),Vt.with(this,t,e),this},t.prototype.withAll=function(t){return void 0===t&&(t=function(){return null}),Vt.withAll(this,t),this},t.prototype.withAllRecursive=function(t){return void 0===t&&(t=3),Vt.withAllRecursive(this,t),this},t.prototype.has=function(t,e,n){return this.addHasConstraint(t,e,n,!0)},t.prototype.hasNot=function(t,e,n){return this.addHasConstraint(t,e,n,!1)},t.prototype.addHasConstraint=function(t,e,n,r){var o=this.matchesHasRelation(t,e,n,r);return this.where("$id",function(t){return o.includes(t)}),this},t.prototype.whereHas=function(t,e){return this.addWhereHasConstraint(t,e,!0)},t.prototype.whereHasNot=function(t,e){return this.addWhereHasConstraint(t,e,!1)},t.prototype.addWhereHasConstraint=function(t,e,n){var r=this.matchesWhereHasRelation(t,e,n);return this.where("$id",function(t){return r.includes(t)}),this},t.prototype.process=function(){var t=this.records();return t=this.hook.execute("beforeProcess",t),t=this.filterWhere(t),t=this.hook.execute("afterWhere",t),t=this.filterOrderBy(t),t=this.hook.execute("afterOrderBy",t),t=this.filterLimit(t),t=this.hook.execute("afterLimit",t)},t.prototype.filterWhere=function(t){return Gt.where(this,t)},t.prototype.filterOrderBy=function(t){return Gt.orderBy(this,t)},t.prototype.filterLimit=function(t){return Gt.limit(this,t)},t.prototype.count=function(){return this.plain().get().length},t.prototype.max=function(t){var e=this.plain().get().reduce(function(e,n){return"number"==typeof n[t]&&e.push(n[t]),e},[]);return 0===e.length?0:Math.max.apply(Math,e)},t.prototype.min=function(t){var e=this.plain().get().reduce(function(e,n){return"number"==typeof n[t]&&e.push(n[t]),e},[]);return 0===e.length?0:Math.min.apply(Math,e)},t.prototype.sum=function(t){return this.plain().get().reduce(function(e,n){return"number"==typeof n[t]&&(e+=n[t]),e},0)},t.prototype.item=function(t){return t?(Vt.eagerLoadRelations(this,[t]),this.model.make(t,!this.wrap)):null},t.prototype.collect=function(t){var e=this;return S.isEmpty(t)?[]:(Vt.eagerLoadRelations(this,t),t.map(function(t){return e.model.make(t,!e.wrap)}))},t.prototype.matchesHasRelation=function(e,n,r,o){var i;void 0===o&&(o=!0),void 0===n?i=function(t){return t.length>=1}:"number"==typeof n?i=function(t){return t.length>=n}:"="===n&&"number"==typeof r?i=function(t){return t.length===r}:">"===n&&"number"==typeof r?i=function(t){return t.length>r}:">="===n&&"number"==typeof r?i=function(t){return t.length>=r}:"<"===n&&"number"==typeof r?i=function(t){return t.length<r}:"<="===n&&"number"==typeof r&&(i=function(t){return t.length<=r});var u=[];return new t(this.rootState,this.entity,!1).with(e).get().forEach(function(t){var n=t[e],r=!1;n?Array.isArray(n)&&n.length<1?r=!1:Array.isArray(n)?r=i(n):n&&(r=i([n])):r=!1,r===o&&u.push(t.$id)}),u},t.prototype.matchesWhereHasRelation=function(t,e,n){void 0===n&&(n=!0);var r=[];return this.newPlainQuery().with(t,e).get().forEach(function(e){var o=e[t];(Array.isArray(o)?!!o.length:!!o)===n&&r.push(e.$id)}),r},t.prototype.delete=function(t){return"function"==typeof t?this.deleteByCondition(t):this.deleteById(t)},t.prototype.deleteById=function(t){t="number"==typeof t?t.toString():t;var e=this.state.data[t];if(!e)return null;var n=this.hook.execute("beforeDelete",e);if(!1===n)return null;this.commitDelete([t]);var r=this.item(n);return this.hook.execute("afterDelete",r),r},t.prototype.deleteByCondition=function(t){var e={};S.forOwn(this.state.data,function(n,r){t(n)&&(e[r]=n)}),e=this.hook.executeOnRecords("beforeDelete",e),this.commitDelete(Object.keys(e));var n=this.collect(this.records(e));return this.hook.executeOnCollection("afterDelete",n),n},t.prototype.deleteAll=function(){var t=this.state.data;t=this.hook.executeOnRecords("beforeDelete",t),this.commitDelete(Object.keys(t));var e=this.collect(this.records(t));return this.hook.executeOnCollection("afterDelete",e),e},t.prototype.commitDelete=function(t){var e=this;this.commit("commitDelete",{ids:t},function(){e.state.data=Object.keys(e.state.data).reduce(function(n,r){return t.includes(r)||(n[r]=e.state.data[r]),n},{})})},t}(),Xt={query:function(t,e,n,r){return function(e){return r[t.$connection+"/query"](t.$name,e)}},all:function(t,e,n,r){return function(e){return r[t.$connection+"/all"](t.$name,e)}},find:function(t,e,n,r){return function(e,n){return r[t.$connection+"/find"](t.$name,e,n)}}},Zt=function(){return(Zt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},te=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(u,a)}c((r=r.apply(t,e||[])).next())})},ee=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},ne={create:function(t,e){return te(this,void 0,void 0,function(){var n,r;return ee(this,function(o){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/create",Zt({entity:r},e),{root:!0})]})})},insert:function(t,e){return te(this,void 0,void 0,function(){var n,r;return ee(this,function(o){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/insert",Zt({entity:r},e),{root:!0})]})})},update:function(t,e){return te(this,void 0,void 0,function(){var n,r;return ee(this,function(o){return n=t.state,r=n.$name,Array.isArray(e)?[2,t.dispatch(n.$connection+"/update",{entity:r,data:e},{root:!0})]:void 0===e.data?[2,t.dispatch(n.$connection+"/update",{entity:r,data:e},{root:!0})]:[2,t.dispatch(n.$connection+"/update",Zt({entity:r},e),{root:!0})]})})},insertOrUpdate:function(t,e){return te(this,void 0,void 0,function(){var n,r;return ee(this,function(o){return n=t.state,r=n.$name,[2,t.dispatch(n.$connection+"/insertOrUpdate",Zt({entity:r},e),{root:!0})]})})},delete:function(t,e){return te(this,void 0,void 0,function(){var n,r,o;return ee(this,function(i){return n=t.state,r=n.$name,o="object"==typeof e?e.where:e,[2,t.dispatch(n.$connection+"/delete",{entity:r,where:o},{root:!0})]})})},deleteAll:function(t){return te(this,void 0,void 0,function(){var e,n;return ee(this,function(r){return e=t.state,n=e.$name,[2,t.dispatch(e.$connection+"/deleteAll",{entity:n},{root:!0})]})})}},re={query:function(t){return function(e,n){return Jt.query(t,e,n)}},all:function(t){return function(e,n){return Jt.all(t,e,n)}},find:function(t){return function(e,n,r){return Jt.find(t,e,n,r)}}},oe=function(){function t(){}return t.createPersistOptions=function(t){return{create:t.create,insert:t.insert,update:t.update,insertOrUpdate:t.insertOrUpdate}},t}(),ie=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function u(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(u,a)}c((r=r.apply(t,e||[])).next())})},ue=function(t,e){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},ae={create:function(t,e){return ie(this,void 0,void 0,function(){var n,r,o,i;return ue(this,function(u){return n=t.state,r=e.entity,o=e.data,i=oe.createPersistOptions(e),[2,new Jt(n,r).setActionContext(t).create(o,i)]})})},insert:function(t,e){return ie(this,void 0,void 0,function(){var n,r,o,i;return ue(this,function(u){return n=t.state,r=e.entity,o=e.data,i=oe.createPersistOptions(e),[2,new Jt(n,r).setActionContext(t).insert(o,i)]})})},update:function(t,e){return ie(this,void 0,void 0,function(){var n,r,o,i,u;return ue(this,function(a){return n=t.state,r=e.entity,o=e.data,i=e.where,u=oe.createPersistOptions(e),[2,new Jt(n,r).setActionContext(t).update(o,i,u)]})})},insertOrUpdate:function(t,e){return ie(this,void 0,void 0,function(){var n,r,o,i;return ue(this,function(u){return n=t.state,r=e.entity,o=e.data,i=oe.createPersistOptions(e),[2,new Jt(n,r).setActionContext(t).insertOrUpdate(o,i)]})})},delete:function(t,e){return ie(this,void 0,void 0,function(){var n,r,o;return ue(this,function(i){return n=t.state,r=e.entity,o=e.where,[2,new Jt(n,r).setActionContext(t).delete(o)]})})},deleteAll:function(t,e){return ie(this,void 0,void 0,function(){var n;return ue(this,function(r){return n=e?e.entity:void 0,[2,t.commit("deleteAll",{entity:n})]})})}},ce={create:function(t,e){var n=e.entity,r=e.data,o=e.create,i=e.insert,u=e.update,a=e.insertOrUpdate;Jt.create(t,n,r,{create:o,insert:i,update:u,insertOrUpdate:a})},commitCreate:function(t,e){var n=e.entity,r=e.data;Jt.commitCreate(t,n,r)},insert:function(t,e){var n=e.entity,r=e.data,o=e.create,i=e.insert,u=e.update,a=e.insertOrUpdate;Jt.insert(t,n,r,{create:o,insert:i,update:u,insertOrUpdate:a})},commitInsert:function(t,e){var n=e.entity,r=e.data;Jt.commitInsert(t,n,r)},update:function(t,e){var n=e.entity,r=e.data,o=e.where,i=e.create,u=e.insert,a=e.update,c=e.insertOrUpdate;Jt.update(t,n,r,o,{create:i,insert:u,update:a,insertOrUpdate:c})},commitUpdate:function(t,e){var n=e.entity,r=e.data;Jt.commitUpdate(t,n,r)},insertOrUpdate:function(t,e){var n=e.entity,r=e.data,o=e.create;Jt.insertOrUpdate(t,n,r,o)},delete:function(t,e){var n=e.entity,r=e.where;Jt.delete(t,n,r)},deleteAll:function(t,e){e&&e.entity?Jt.deleteAll(t,e.entity):Jt.deleteAll(t)},commitDelete:function(t,e){var n=e.entity,r=e.ids;Jt.commitDelete(t,n,r)}};var se=function(){function t(){}return t.set=function(){this.value=""+this.prefix+this.count},t.get=function(){return this.value},t.increment=function(){return this.count++,this.set(),this.get()},t.count=0,t.prefix="_no_key_",t.value="",t}(),fe=function(){function t(){}return t.create=function(t){return function(e,n,r){var o=t.id(e);return void 0===o||null===o||""===o?se.get():o}},t}(),le=function(){return(le=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},he=function(){function t(){}return t.create=function(t){var e=this;return function(n,r,o){var i=e.getId(t,n);return le({},n,{$id:i})}},t.getId=function(t,e){var n=t.id(e);return void 0===n||null===n||""===n?se.increment():n},t}(),pe=function(){function t(t){var e=this;this.schemas={},this.model=t;var n=t.database().models();Object.keys(n).forEach(function(t){e.one(n[t])})}return t.create=function(t){return new this(t).one()},t.prototype.one=function(t){if(t=t||this.model,this.schemas[t.entity])return this.schemas[t.entity];var e=new Ft.Entity(t.entity,{},{idAttribute:fe.create(t),processStrategy:he.create(t)});this.schemas[t.entity]=e;var n=this.definition(t);return e.define(n),e},t.prototype.many=function(t){return new Ft.Array(this.one(t))},t.prototype.union=function(t){return new Ft.Union(this.schemas,t)},t.prototype.definition=function(t){var e=this,n=t.fields();return Object.keys(n).reduce(function(t,r){var o=n[r];return o instanceof Q&&(t[r]=o.define(e)),t},{})},t}(),de=function(){return(de=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},ye=function(){function t(){}return t.create=function(t,e){var n={namespaced:!0,state:{$name:t},getters:re,actions:ae,mutations:ce,modules:{}};return this.createModules(n,t,e)},t.createModules=function(t,e,n){var r=this;return Object.keys(n).forEach(function(o){var i=n[o];t.modules[o]={namespaced:!0},t.modules[o].state=r.createState(e,o,i),t.getters[o]=function(t,e,n,r){return function(){return e.query(o)}},t.modules[o].getters=de({},Xt,i.getters),t.modules[o].actions=de({},ne,i.actions),t.modules[o].mutations=i.mutations||{}}),t},t.createState=function(t,e,n){var r="function"==typeof n.state?n.state():n.state;return de({},r,{$connection:t,$name:e,data:{}})},t}();!function(){function t(){this.entities=[],this.schemas={}}t.prototype.start=function(t,e){this.store=t,this.namespace=e,this.registerModules(),this.createSchema()},t.prototype.register=function(t,e){this.entities.push({name:t.entity,model:t,module:e})},t.prototype.model=function(t){return this.models()[t]},t.prototype.models=function(){return this.entities.reduce(function(t,e){return t[e.name]=e.model,t},{})},t.prototype.module=function(t){return this.modules()[t]},t.prototype.modules=function(){return this.entities.reduce(function(t,e){return t[e.name]=e.module,t},{})},t.prototype.registerModules=function(){var t=ye.create(this.namespace,this.modules());this.store.registerModule(this.namespace,t)},t.prototype.createSchema=function(){var t=this;this.entities.forEach(function(e){t.schemas[e.name]=pe.create(e.model)})}}();function ve(){Object.keys(this.constructor.fields()).filter(t=>this.constructor.fields()[t]instanceof Q).forEach(t=>{delete this[t]})}var me={install(t,e){!function(t,e){t.Query.prototype.applyFilter=C}(t),function(t,e){t.Model.prototype.cleanInstanceRelations=ve}(t)}};const be={VIEW_MODE:"VIEW_MODE",EDIT_MODE:"EDIT_MODE"},ge={CANCEL_EDIT:"cancelEdit",CREATE_ITEM:"createNew",DELETE_ITEM:"delete",ENTER_EDIT:"enterEdit",SAVE_ITEM:"save"};function Oe(t){let{modelReference:e,entityName:n,internalName:r}=t;if(!n)throw new Error("Missing entityName option for FormComponentMixinFactory");let o=n.toLowerCase(),i=r||n,u="local"+i+"Object";return{data:function(){return{[u]:null,initialViewMode:be.VIEW_MODE,FORM_ACTIONS:ge}},computed:{["current"+i+"Item"]:function(){return null!==this[u]?this[u]:this.storeObject}},created:function(){this.id&&"create"===this.id&&(this["create"+i](),this.initialViewMode=be.EDIT_MODE)},methods:{cancelEdit(){this[u]=null},enterEdit(){this[u]=Object.assign({},this["current"+i+"Item"],{IsDirty:!0})},["create"+i](){this[u]=Object.assign(new e,{IsDirty:!0,IsNew:!0})},["delete"+i](){},["save"+i](){null!=this[u]&&(this[u].IsNew?this.$store.dispatch("entities/"+o+"/insert",{data:this[u]}):this.$store.dispatch("entities/"+o+"/update",this[u]),this.$store.dispatch("crud/saveAll",{entityName:o}).then(()=>{this["load"+i](this[u].Id).then(t=>{this[u]=null,this.Id=t.Id})}))}}}}function we(t){let{entityName:e,includes:n,internalName:r}=t;if(!e)throw new Error("Missing entityName option for MultipleEntitiesComponentMixin");let o=e.toLowerCase(),i=r||e;return{props:{externalFilter:Object},data:()=>({["isLoading"+i+"Collection"]:!1}),computed:{["current"+i+"Collection"]:function(){if(null===this.externalFilter)return[];let t=this.$store.getters["entities/"+o+"/query"]();return this.externalFilter&&(t=t.applyFilter(this.externalFilter)),n&&(t=t.with(n)),t.get()}},mounted(){this["load"+i+"Collection"]()},methods:{["load"+i+"Collection"]:function(){if(null===this.externalFilter)return;this["isLoading"+i+"Collection"]=!0;let t={};return n&&(t.include=n),this.externalFilter&&(t.filter=P(this.externalFilter)),this.$store.dispatch("crud/getCollection",{entityName:o,configuration:t}).then(t=>{this["isLoading"+i+"Collection"]=!1}).catch(t=>{this["isLoading"+i+"Collection"]=!1,console.warn(t)})}},watch:{externalFilter(t,e){t&&this["load"+i+"Collection"]()}}}}function _e(t){let{entityName:e,internalName:n}=t;if(!e)throw new Error("Missing entityName option for SingleEntityComponentMixinFactory");let r=n||e,o="local"+r+"Object",i=e.toLowerCase();return{props:["id"],data:function(){return{[o]:null,storeObject:null,["isLoading"+r+"Item"]:!1}},computed:{["current"+r+"Item"]:function(){return null!==this[o]?this[o]:this.storeObject}},created:function(){this.id&&"create"!==this.id&&this["load"+r](this.id)},methods:{["load"+r]:function(t){return this["isLoading"+r+"Item"]=!0,this.$store.dispatch("crud/get",{entityName:i,pks:[t]}).then(t=>{this["isLoading"+r+"Item"]=!1,this.storeObject=t}).catch(t=>{throw this["isLoading"+r+"Item"]=!1,t})}}}}n.d(e,"GOUuuid",function(){return je}),n.d(e,"GOAPIAdapter",function(){return ke}),n.d(e,"GOPredicate",function(){return Pe}),n.d(e,"FormComponentMixin",function(){return Ee}),n.d(e,"MultipleEntitiesComponentMixin",function(){return Ae}),n.d(e,"SingleEntityComponentMixin",function(){return xe}),n.d(e,"VuexORMPlugin",function(){return Me});const je=r,ke=o,Pe=i,Ee=u,Ae=a,xe=c,Me=me}])});